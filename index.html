<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8">
  <title>IELTS Speaking Test</title>
</head>
<body>
  <h2>Upload your voice for IELTS Speaking Analysis</h2>

  <input type="file" id="audioFile" accept="audio/*">
  <button onclick="uploadAudio()">Analyze</button>

  <h3>Results</h3>
  <p><b>Transcript:</b> <span id="transcript"></span></p>
  <p><b>Band 7:</b> <span id="band7"></span></p>
  <p><b>Band 8:</b> <span id="band8"></span></p>
  <p><b>Band 9:</b> <span id="band9"></span></p>

  <script>
    async function uploadAudio() {
      const fileInput = document.getElementById("audioFile");
      if (!fileInput.files.length) {
        alert("Please select an audio file!");
        return;
      }

      const formData = new FormData();
      formData.append("audio", fileInput.files[0]);

      const response = await fetch("http://localhost:5000/analyze-speech", {
        method: "POST",
        body: formData
      });

      const data = await response.json();

      document.getElementById("transcript").textContent = data.transcript || "N/A";
      document.getElementById("band7").textContent = data.band7 || "N/A";
      document.getElementById("band8").textContent = data.band8 || "N/A";
      document.getElementById("band9").textContent = data.band9 || "N/A";
    }
  </script>
</body>
</html>
